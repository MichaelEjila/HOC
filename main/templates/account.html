<!DOCTYPE html>
<html lang="en">

{% load static %}

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="img/apple-icon.png">
  <link rel="icon" type="image/png" href="{% static "img/nuslog.png" %}">
  <title>
    EUNUESA
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="{% static "css/nucleo-icons.css" %}" rel="stylesheet" />
  <link href="{% static "css/nucleo-svg.css" %}" rel="stylesheet" />

  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>

  <!-- CSS Files -->
  <link id="pagestyle" href="{% static "css/soft-ui-dashboard.css" %}" rel="stylesheet" />

  <!-- Nepcha Analytics (nepcha.com) -->
  <script defer data-site="DOMAIN_NAME" src="https://api.nepcha.com/js/nepcha-analytics.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jsqrcode/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>

  <script src="{% static "js/modalpops.js"%}"></script>
  <style>
   
    #scan-btn {
      margin-top: 10px;
    }

    #video{
      width:100%;
      height:100%;
    }

    .modal{
      margin:15%;
      
    
    }

    .close-btn{
      font-size:30px;
      font-weight:bolder;
     

    }

  </style>

</head>

<body class="g-sidenav-show  bg-gray-100 virtual-reality">
  <div>
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur"
      navbar-scroll="true">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="javascript:;">EU-NUESA</a></li>
          </ol>
          <h6 class="font-weight-bolder mb-0">My Account</h6>
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
            <!-- <div class="input-group">
              <span class="input-group-text text-body"><i class="fas fa-search" aria-hidden="true"></i></span>
              <input type="text" class="form-control" placeholder="Type here...">
            </div> -->
          </div>
          <ul class="navbar-nav  justify-content-end">
            <li class="nav-item d-flex align-items-center">
              <a class="btn btn-outline-primary btn-sm mb-0 me-3" href="{% url 'index_view' %}">Home</a>
            </li>

           
            <li class="nav-item dropdown pe-2 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0" id="dropdownMenuButton" data-bs-toggle="dropdown"
                aria-expanded="false">
                <i class="fa fa-bell cursor-pointer"></i>
              </a>
              <ul class="dropdown-menu  dropdown-menu-end  px-2 py-3 me-sm-n4" aria-labelledby="dropdownMenuButton">

                <!--VATO!!!!    Return the Notifications here via lists i.e <li> -->

                <li>
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">

                          {% if error_message.status == True %}
                          <p>{{ error_message.message }}</p>
                          
                         {%else%} 
                          <p> {{ message }}</p>

                          {% endif %}
                        </h6>
                        
                      </div>
                    </div>
                  </a>
                </li>

                <!--Notifications ends here-->



              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <!-- End Navbar -->
  </div>




  <div class="border-radius-xl mt-3 mx-3 position-relative" style="background-image: url('') ; background-size:;">

    <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
      <div class="col-xl-6 mb-xl-0 mb-4">
        <div class="card bg-transparent shadow-xl">
          <div class="overflow-hidden position-relative border-radius-xl"
            style="background-image: url('{% static 'img/bty.jpg' %}'"><!--this is not an error-->
            <span class="mask bg-gradient-dark"></span>
            <div class="card-body position-relative z-index-1 p-3">
              <div class="container-fluid py-4">
                <div class="row">
                  <div class="col-lg-8">
                    <div class="row">
                      <div class="card move-on-hover mt-4">
                        <div class="card-body">
                          <div class="d-flex">
                            <h5 class="my-auto">
                              <b>
                                Point Balance:
                              </b>
                              <!-- VATO!!!!   Return the user BALANCE HEre-->
                              {{balance}}
                            </h5>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex">
                        <div class="me-4">
                          <br><br>
                          <p class="text-white text-sm opacity-8 mb-0">Card Holder</p>
                          <!-- VATO!!!!   Return the User FullName HEre-->
                          <h6 class="text-white mb-0">{{first_name}}, {{last_name}}</h6>
                        </div>
                        <div>
                          <br><br>
                          <p class="text-white text-sm opacity-8 mb-0">Card Type</p>
                          <!-- VATO!!!!   Return the User CarsType Has HEre-->
                          <h6 class="text-white mb-0">{{card_type}}</h6>
                        </div>
                      </div>
                      &nbsp;
                      <!--VATO!!! write logic to upgrade users card type to 'clubs' if user has 4500 points onclick of the button below-->
                      
                      {% comment %} {% if user.balance >= 4500 %}
                        <a class="btn bg-gradient-grey me-5" href=""><i class="fas fa-plus"></i>&nbsp;&nbsp;Upgrade Card</a>
                      {% endif %} {% endcomment %}

                      <!---->


                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-12 mb-lg-0 mb-4">
            <div class="card mt-4">
              <div class="card-header pb-0 p-3">
                <div class="row">
                  <div class="col-6 d-flex align-items-center">
                    <h6 class="mb-0">Manage Transactions</h6>
                  </div>
                  <div class="col-6 text-end">
                    <a class="btn bg-gradient-dark mb-0" href="{% url 'transaction_view' %}"><i
                        class="fas fa-plus"></i>&nbsp;&nbsp;History</a>
                  </div>
                </div>
              </div>
              {% comment %} <form method="post" action="{% url 'account_view' %}"> {% endcomment %}
                {% csrf_token %}
                <div class="card-body p-3">
                  <!--VATO!! this subsection deals with the USERS account operations-->
                  <button type="submit" class="btn btn-outline-dark w-100" name="load_point" value="scan-qr" onclick="openModal('scan-qr')">Scan Task Ticket</button>
                  
                  {% comment %} <button type="submit" class="btn btn-outline-dark w-100" name="action" value="make-qr" onclick="openModal('make-qr')" unclickable>Create Point Ticket</button> {% endcomment %}
                  <br>
                  <button type="submit" class="btn btn-outline-dark w-100" name="action" value="matric" onclick="openModal('matric')">Send Direct to Matric</button>
                </div>
              {% comment %} </form> {% endcomment %}
              
            </div>
          </div>
        </div>
      

      <!-- Scan QR Modal -->
      <div id="scan-qr-modal" class="modal">
        <div class="modal-content">
         
         <div class="overflow-hidden position-relative border-radius-xl"
            style="background-image: url('{% static 'img/bty.jpg' %}');"><!--this is not an error--> 
            <span class="mask bg-gradient-dark"></span>
            <div class="card-body position-relative">
              <div class="container-fluid py-6">
                <span class="close-btn" onclick="closeModal('scan-qr');">&times;</span>
                      <div class="card move-on-hover mt-1">
                        <div class="card-body">
                          <div id="">
                            <video id="video" ></video>
                          </div>
                         
                            
                            <div id="">
                              <form id="scannedhash" method="post" action="">
                                {% csrf_token %} 
                                <small>
                                  OpenTicket Hash: &nbsp;
                                </small>
                                <input type="text" id="qr_code_input" name="scan_ticket" placeholder="SCANNING..." readonly
                                  class="centera">
                                  <br>
{% comment %} VATO ..... Button below will trigger submit for sanned ticket {% endcomment %}
                                  <button onclick="" id="appd2" class="btn btn-outline-dark w-100">Load Ticket</button>
                              </form>
                              
                            
                            
                          </div>
                          <button onclick="scanQRCode();" id="appd1" class="btn btn-outline-dark w-100">Scan QR</button>     
                        </div>

                      </div>
                      
                      <div class="d-flex">
                        <div class="me-4">
                          <br>
                        

                          <!--VATO!! understand this...
once the OPENTICKET hash with respect to the form action above is submitted, the 'Verifying" message is displayed and after 5seconds  a success message is displayed

your logic should trigger the function proceed('BlockHsh') to control this flow, then suspend this function from calling itself in qrscan.js Line 39
-->

                          {% comment %} <!-- {% if (a hash is gotten and posted) %} --> {% endcomment %}
                          <!-- <script>
                            proceed('BlockHsh')
                          </script> -->
                          {% comment %} <!-- {% endif %} --> {% endcomment %}
                          {% comment %} <p class="text-white text-sm opacity-8 mb-0 loading-icon" id="BlockHsh-loading">Verifying...
                          </p> {% endcomment %}


                          {% if error_message.status == True %}
                            <div id="BlockHsh-success" class="success-message">{{ error_message.message }}
                              <span>&#10004;</span>
                            </div>
                  
                            
                          {% endif %}
                          <small class="text-white mb-0">BLOCK HASH VERIFIER</small>
                        </div>

                      </div>



                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="col-6 text-end">
            <a class="btn bg-gradient-dark mb-0" onclick="proceed('BlockHsh')">&nbsp;&nbsp;Cashout BlockHash</a>
          </div> -->
        </div>
      </div>


      <!--VATO!! dont play with these scripts ohhh-->
      <script src="https://cdn.jsdelivr.net/npm/jsqr@2.1.0/dist/jsQR.js"></script>
      <script src="{% static "js/qrscan.js" %}"></script>
      <script src="{% static "js/jsQR.js" %}"></script>
      <!--No try me o-->


      <!-- Make QR Modal -->
      <div id="make-qr-modal" class="modal">
        <div class="modal-content">
          <div class="overflow-hidden position-relative border-radius-xl"
            style="background-image: url('{% static 'img/bty.jpg' %}');"><!--this is not an error-->
            <span class="mask bg-gradient-dark"></span>
            <div class="card-body position-relative z-index-1 p-3">
              <div class="container-fluid py-4">
                <span class="close-btn" onclick="closeModal('make-qr');">&times;</span>
                <div class="row">
                  <div class="col-lg-8">
                    <div class="row">
                      <div class="card move-on-hover mt-4">
                        <div class="card-body">
                          <div class="d-flex">
                            <small class="my-auto">
                              <!-- {% csrf_token %} -->
                              <!--VATO!!!! submit this form via SendEUNU('makeTicket') then pull value from action-->
                              <div id="mkT">
                                <form id="makeTicket" method="post" action="">
                                  {% csrf_token %}
                                  
                                  <input type="number" id="make-qr" name="amount" placeholder="enter amount"
                                  class="form-control" required>
                                    <br>
                                    <button type="submit" class="btn bg-gradient-dark mb-0" onclick="proceed('make-qr')">&nbsp;&nbsp;Create Cash
                                      Ticket</button>
                                </form>
                              </div>
                              <!--VATO!!! Display Open Ticket QRcode here-->
                              <p id="OpenticketQR">trertgf {{ qr_hash }}</p>
                              
                            </small>
                          </div>
                        </div>
                      </div>
                      <br>
                      
                      <div class="d-flex">
                        <div class="me-4">
                                <br>
                          <small class="text-white mb-0">BLOCK HASH GENERATOR</small>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Migrate Account Modal -->
      <div id="matric-modal" class="modal">
        <div class="modal-content">
          <div class="overflow-hidden position-relative border-radius-xl"
            style="background-image: url('{% static 'img/bty.jpg' %}');"><!--this is not an error-->
            <span class="mask bg-gradient-dark"></span>
            <div class="card-body position-relative z-index-1 p-3">
              <div class="container-fluid py-4">
                <span class="close-btn" onclick="closeModal('matric');">&times;</span>
                <div class="row">
                  <div class="col-lg-8">
                    <div class="row">
                      <div class="card move-on-hover mt-4">
                        <div class="card-body">
                          <div class="d-flex">
                            <small class="my-auto">
                              <!-- {% csrf_token %} -->
                              <!--VATO!!!! submit this form via SendEUNU('sendtomatric') then pull value from action-->
                              <div id="mkT">
                                <form id="sendtomatric" method="post" action="">
                                  {% csrf_token %}
                                  Receivers MatricNumber
                                  <input type="number" id="blocknumber" name="matric_number" placeholder="last 4 digits only"
                                  class="form-control" required>
                                  <br>
                                  Amount
                                  <input type="number" id="blocknumber" name="amount" placeholder="No of points"
                                  class="form-control" required>
                                  <button type="submit" class= "btn bg-gradient-dark mb-0" onclick="proceed('matric')">&nbsp;&nbsp;Send Points</button>

                                </form>
                              </div>
                            </small>
                          </div>
                        </div>
                      </div>
                      <br>
                      
                      <div class="d-flex">
                        <div class="me-4">
                        
                          <small class="text-white mb-0">SEND DIRECT</small>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>




    </main>
  </div>
  <footer class="footer pt-3  ">
    <div class="container-fluid">
      <div class="row align-items-center justify-content-lg-between">
        <div class="col-lg-6 mb-lg-0 mb-4">
          <div class="copyright text-center text-sm text-muted text-lg-start">
            ©
            <script>
              document.write(new Date().getFullYear())
            </script> | Armtechnologies
          </div>
        </div>

      </div>
    </div>
  </footer>


  <!--   Core JS Files   -->
  <script src="{% static "js/core/popper.min.js" %}"></script>
  <script src="{% static "js/core/bootstrap.min.js" %}"></script>
  <script src="{% static "js/plugins/perfect-scrollbar.min.js" %}"></script>
  <script src="{% static "js/plugins/smooth-scrollbar.min.js" %}"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="{% static "js/soft-ui-dashboard.min.js?v=1.0.7"%}"></script>
</body>

</html>